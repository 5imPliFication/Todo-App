spring.application.name=supabase
jwt.secret=vGST0W1Z6M+GaZ4zX+UN4xYNZzV077+99Z0dOrfnDOM=
jwt.expiration = 86400000

spring.datasource.url=jdbc:postgresql://aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?user=postgres.gxvfgonuyupfednzhdhu&password=namxz2005

server.servlet.session.timeout=30m

server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.same-site=lax

#=============== HIKARI ========================
spring.datasource.hikari.data-source-properties.ssl=true
spring.datasource.hikari.data-source-properties.sslmode=require
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.connection-test-query=SELECT 1
#          ---- specifically for postgresql ----
spring.datasource.hikari.data-source-properties.prepStmtCacheSize=0
spring.datasource.hikari.data-source-properties.cachePrepStmts=false
spring.datasource.hikari.data-source-properties.prepStmtCacheSqlLimit=0

spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Disable prepared statement caching
spring.jpa.properties.hibernate.jdbc.use_get_generated_keys=true

#--HIBERNATE---
spring.jpa.properties.hibernate.boot.use_jdbc_metadata_defaults=false
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# Prevent connection leaks
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.connection-init-sql=SELECT 1

# Hibernate batch optimizations (reduces connection time)
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.query.in_clause_parameter_padding=true
